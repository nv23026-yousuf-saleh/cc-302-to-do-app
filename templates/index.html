<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowTask - Smart Task Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 sidebar">
                <div class="sidebar-header">
                    <div class="logo">
                        <i class="bi bi-lightning-charge-fill"></i>
                        <span>FlowTask</span>
                    </div>
                    <p class="tagline">Stay in your flow</p>
                </div>

                <!-- Theme Toggle -->
                <div class="theme-toggle-container">
                    <button id="themeToggle" class="theme-toggle-btn" aria-label="Toggle theme">
                        <i class="bi bi-sun-fill theme-icon-light"></i>
                        <i class="bi bi-moon-stars-fill theme-icon-dark"></i>
                        <span class="theme-label">Dark Mode</span>
                    </button>
                </div>

                <!-- Gamification Stats -->
                <div class="streak-card">
                    <div class="streak-icon">
                        <i class="bi bi-fire"></i>
                    </div>
                    <div class="streak-info">
                        <div class="streak-number" id="streakCount">0</div>
                        <div class="streak-label">Day Streak</div>
                    </div>
                    <div class="xp-badge" id="xpPoints">0 XP</div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-item">
                        <i class="bi bi-check-circle-fill text-success"></i>
                        <span id="completedToday">0 completed today</span>
                    </div>
                    <div class="stat-item">
                        <i class="bi bi-calendar-event text-primary"></i>
                        <span id="todayDate"></span>
                    </div>
                </div>

                <!-- View Switcher -->
                <div class="view-switcher">
                    <button class="view-btn active" data-view="today">
                        <i class="bi bi-calendar-day"></i> Today
                    </button>
                    <button class="view-btn" data-view="focus">
                        <i class="bi bi-bullseye"></i> Focus Mode
                    </button>
                    <button class="view-btn" data-view="calendar">
                        <i class="bi bi-calendar3"></i> Calendar
                    </button>
                    <button class="view-btn" data-view="timeline">
                        <i class="bi bi-clock-history"></i> Timeline
                    </button>
                    <button class="view-btn" data-view="all">
                        <i class="bi bi-list-ul"></i> All Tasks
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 main-content">
                <div class="content-wrapper">
                    <!-- Header with Add Task -->
                    <div class="task-input-section">
                        <h2 class="section-title" id="viewTitle">Today's Tasks</h2>
                        <div class="quick-add">
                            <div class="input-wrapper">
                                <i class="bi bi-plus-circle input-icon"></i>
                                <input 
                                    type="text" 
                                    id="taskInput" 
                                    class="task-input" 
                                    placeholder="Add a task... (e.g., 'Buy milk by Friday')"
                                    autocomplete="off"
                                >
                                <input 
                                    type="date" 
                                    id="deadlineInput" 
                                    class="deadline-input"
                                    title="Set deadline"
                                >
                                <select id="prioritySelect" class="priority-select">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Pills -->
                    <div class="filter-section" id="filterSection">
                        <button class="filter-pill active" data-filter="all">
                            All <span class="pill-count" id="countAll">0</span>
                        </button>
                        <button class="filter-pill" data-filter="active">
                            Active <span class="pill-count" id="countActive">0</span>
                        </button>
                        <button class="filter-pill" data-filter="completed">
                            Done <span class="pill-count" id="countCompleted">0</span>
                        </button>
                        <button class="filter-pill filter-high" data-filter="high">
                            <i class="bi bi-exclamation-circle"></i> Urgent
                        </button>
                    </div>

                    <!-- Task List Container -->
                    <div id="taskContainer" class="task-container"></div>

                    <!-- Timeline View (Hidden by default) -->
                    <div id="timelineView" class="timeline-view" style="display: none;">
                        <div class="timeline-items" id="timelineItems"></div>
                    </div>

                    <!-- Calendar View (Hidden by default) -->
                    <div id="calendarView" class="calendar-view" style="display: none;">
                        <div class="calendar-header">
                            <button id="prevMonth" class="month-nav-btn">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <h3 id="calendarMonthYear" class="calendar-month-title">January 2026</h3>
                            <button id="nextMonth" class="month-nav-btn">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                        <div class="calendar-grid">
                            <div class="calendar-weekdays">
                                <div class="calendar-weekday">Sun</div>
                                <div class="calendar-weekday">Mon</div>
                                <div class="calendar-weekday">Tue</div>
                                <div class="calendar-weekday">Wed</div>
                                <div class="calendar-weekday">Thu</div>
                                <div class="calendar-weekday">Fri</div>
                                <div class="calendar-weekday">Sat</div>
                            </div>
                            <div id="calendarDays" class="calendar-days"></div>
                        </div>
                        <div id="selectedDateTasks" class="selected-date-tasks"></div>
                    </div>

                    <!-- Focus Mode View (Hidden by default) -->
                    <div id="focusView" class="focus-view" style="display: none;">
                        <div class="focus-container">
                            <!-- Timer Display -->
                            <div class="timer-display">
                                <svg class="timer-ring" viewBox="0 0 200 200">
                                    <circle class="timer-ring-bg" cx="100" cy="100" r="90" />
                                    <circle class="timer-ring-progress" cx="100" cy="100" r="90" id="timerRingProgress" />
                                </svg>
                                <div class="timer-content">
                                    <div class="timer-time" id="timerDisplay">25:00</div>
                                    <div class="timer-mode" id="timerMode">WORK SESSION</div>
                                </div>
                            </div>

                            <!-- Task Selection -->
                            <div class="focus-task-selector">
                                <label class="focus-label">Focusing on:</label>
                                <select id="focusTaskSelect" class="focus-task-dropdown">
                                    <option value="">Select a task...</option>
                                </select>
                                <div class="focus-task-display" id="focusTaskDisplay">
                                    <i class="bi bi-check-circle"></i>
                                    <span>No task selected</span>
                                </div>
                            </div>

                            <!-- Session Indicators -->
                            <div class="pomodoro-sessions">
                                <div class="session-dot" data-session="1"></div>
                                <div class="session-dot" data-session="2"></div>
                                <div class="session-dot" data-session="3"></div>
                                <div class="session-dot" data-session="4"></div>
                                <span class="session-count" id="sessionCount">Session 0/4</span>
                            </div>

                            <!-- Controls -->
                            <div class="focus-controls">
                                <button id="startPomodoroBtn" class="focus-btn focus-btn-primary">
                                    <i class="bi bi-play-fill"></i> Start Focus
                                </button>
                                <button id="pausePomodoroBtn" class="focus-btn focus-btn-secondary" style="display: none;">
                                    <i class="bi bi-pause-fill"></i> Pause
                                </button>
                                <button id="resumePomodoroBtn" class="focus-btn focus-btn-primary" style="display: none;">
                                    <i class="bi bi-play-fill"></i> Resume
                                </button>
                                <button id="skipPomodoroBtn" class="focus-btn focus-btn-outline" style="display: none;">
                                    <i class="bi bi-skip-forward-fill"></i> Skip
                                </button>
                                <button id="stopPomodoroBtn" class="focus-btn focus-btn-danger" style="display: none;">
                                    <i class="bi bi-stop-fill"></i> Stop
                                </button>
                            </div>

                            <!-- XP Reward Display -->
                            <div class="focus-reward">
                                <i class="bi bi-star-fill"></i>
                                <span id="focusReward">+5 XP per completed session</span>
                            </div>

                            <!-- Settings -->
                            <div class="focus-settings">
                                <button id="focusSettingsBtn" class="settings-toggle">
                                    <i class="bi bi-gear-fill"></i> Timer Settings
                                </button>
                                <div id="focusSettingsPanel" class="settings-panel" style="display: none;">
                                    <div class="setting-row">
                                        <label>Work Duration (min)</label>
                                        <input type="number" id="workDuration" value="25" min="1" max="60" />
                                    </div>
                                    <div class="setting-row">
                                        <label>Short Break (min)</label>
                                        <input type="number" id="shortBreak" value="5" min="1" max="15" />
                                    </div>
                                    <div class="setting-row">
                                        <label>Long Break (min)</label>
                                        <input type="number" id="longBreak" value="15" min="10" max="30" />
                                    </div>
                                    <div class="setting-row">
                                        <label>Sound Alerts</label>
                                        <input type="checkbox" id="soundEnabled" checked />
                                    </div>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="focus-stats">
                                <div class="stat-box">
                                    <div class="stat-value" id="todayPomodoros">0</div>
                                    <div class="stat-label">Today</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-value" id="totalFocusTime">0h 0m</div>
                                    <div class="stat-label">Total Time</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-value" id="completedPomodoros">0</div>
                                    <div class="stat-label">All Time</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer Actions -->
                    <div class="footer-actions">
                        <div class="task-summary">
                            <span id="taskSummary">No tasks yet</span>
                        </div>
                        <button id="clearCompleted" class="btn-clear">
                            <i class="bi bi-trash3"></i> Clear completed
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Celebration Modal -->
    <div class="celebration-overlay" id="celebrationOverlay">
        <div class="celebration-content">
            <div class="celebration-icon">ðŸŽ‰</div>
            <h3>Amazing!</h3>
            <p id="celebrationMessage">Task completed!</p>
            <div class="xp-earned" id="xpEarned">+10 XP</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>